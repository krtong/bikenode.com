<!-- Create Segment Modal -->
<div class="modal" id="createSegmentModal">
    <div class="modal-overlay"></div>
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2 class="modal-title">Create New Segment</h2>
            <button class="modal-close" aria-label="Close modal">&times;</button>
        </div>
        
        <div class="modal-body">
            <div class="create-segment-steps">
                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <span class="step-number">1</span>
                        <span class="step-label">Draw Route</span>
                    </div>
                    <div class="step" data-step="2">
                        <span class="step-number">2</span>
                        <span class="step-label">Set Details</span>
                    </div>
                    <div class="step" data-step="3">
                        <span class="step-number">3</span>
                        <span class="step-label">Review</span>
                    </div>
                </div>
                
                <!-- Step 1: Draw Route -->
                <div class="step-content active" data-step="1">
                    <div class="create-instructions">
                        <p>Click on the map to set the start and end points of your segment. The route will be automatically calculated along roads.</p>
                    </div>
                    
                    <div class="create-map" id="createSegmentMap">
                        <!-- Leaflet map will be initialized here -->
                    </div>
                    
                    <div class="route-info">
                        <div class="route-stat">
                            <span class="label">Distance</span>
                            <span class="value" id="routeDistance">0.0 mi</span>
                        </div>
                        <div class="route-stat">
                            <span class="label">Elevation Gain</span>
                            <span class="value" id="routeElevation">0 ft</span>
                        </div>
                        <div class="route-stat">
                            <span class="label">Average Grade</span>
                            <span class="value" id="routeGrade">0.0%</span>
                        </div>
                    </div>
                </div>
                
                <!-- Step 2: Set Details -->
                <div class="step-content" data-step="2">
                    <form class="segment-form">
                        <div class="form-group">
                            <label for="segmentName">Segment Name</label>
                            <input type="text" id="segmentName" class="form-input" placeholder="e.g., Main Street Sprint" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="segmentDescription">Description (Optional)</label>
                            <textarea id="segmentDescription" class="form-textarea" rows="3" placeholder="Add any helpful details about this segment..."></textarea>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="segmentType">Segment Type</label>
                                <select id="segmentType" class="form-select">
                                    <option value="auto">Auto-detect</option>
                                    <option value="climb">Climb</option>
                                    <option value="sprint">Sprint</option>
                                    <option value="descent">Descent</option>
                                    <option value="mixed">Mixed</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="segmentSurface">Surface Type</label>
                                <select id="segmentSurface" class="form-select">
                                    <option value="paved">Paved</option>
                                    <option value="gravel">Gravel</option>
                                    <option value="dirt">Dirt/Trail</option>
                                    <option value="mixed">Mixed</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Visibility</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="visibility" value="public" checked>
                                    <span>Public - Anyone can see and ride this segment</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="visibility" value="private">
                                    <span>Private - Only you can see this segment</span>
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                
                <!-- Step 3: Review -->
                <div class="step-content" data-step="3">
                    <div class="segment-preview">
                        <div class="preview-map" id="previewMap">
                            <!-- Small preview map -->
                        </div>
                        
                        <div class="preview-details">
                            <h3 id="previewName">Segment Name</h3>
                            <p id="previewDescription">Description will appear here...</p>
                            
                            <div class="preview-stats">
                                <div class="preview-stat">
                                    <span class="icon">üìè</span>
                                    <span id="previewDistance">0.0 mi</span>
                                </div>
                                <div class="preview-stat">
                                    <span class="icon">üìà</span>
                                    <span id="previewElevation">0 ft</span>
                                </div>
                                <div class="preview-stat">
                                    <span class="icon">üìê</span>
                                    <span id="previewGrade">0.0%</span>
                                </div>
                                <div class="preview-stat">
                                    <span class="icon">üè∑Ô∏è</span>
                                    <span id="previewType">Type</span>
                                </div>
                            </div>
                            
                            <div class="preview-notice">
                                <p><strong>Note:</strong> Once created, segments cannot be edited. Make sure all details are correct before submitting.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal-footer">
            <button class="btn-secondary" id="prevStepBtn" style="display: none;">
                <span class="icon">‚Üê</span>
                Previous
            </button>
            <button class="btn-primary" id="nextStepBtn">
                Next
                <span class="icon">‚Üí</span>
            </button>
            <button class="btn-primary" id="createSegmentBtn" style="display: none;">
                <span class="icon">‚úì</span>
                Create Segment
            </button>
        </div>
    </div>
</div>