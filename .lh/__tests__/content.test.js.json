{
    "sourceFile": "__tests__/content.test.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1740771931236,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740774137178,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,63 @@\n+import { extractCraigslistData } from '../web_extension/chrome/content.js';\n+\n+describe('Content Script Unit Tests', () => {\n+  beforeEach(() => {\n+    // Setup mock DOM for Craigslist page\n+    document.body.innerHTML = `\n+      <div id=\"titletextonly\">2018 Trek Bike</div>\n+      <span class=\"price\">$500</span>\n+      <time class=\"date timeago\">2023-06-15</time>\n+      <div class=\"mapaddress\">123 Main St, City</div>\n+      <section id=\"postingbody\">Great condition Trek bike for sale.</section>\n+      <div id=\"thumbs\">\n+        <a class=\"thumb\" href=\"#\"><img src=\"https://images.craigslist.org/00101_abc123_50x50c.jpg\"></a>\n+        <a class=\"thumb\" href=\"#\"><img src=\"https://images.craigslist.org/00202_def456_50x50c.jpg\"></a>\n+      </div>\n+      <div class=\"attrgroup\">\n+        <span>make / manufacturer: Trek</span>\n+        <span>model name / number: FX</span>\n+        <span>bicycle type: hybrid</span>\n+      </div>\n+    `;\n+    \n+    // Mock window.location\n+    delete window.location;\n+    window.location = {\n+      href: 'https://craigslist.org/d/bicycles/12345.html',\n+      pathname: '/d/bicycles/12345.html'\n+    };\n+  });\n+\n+  test('extractCraigslistData extracts all fields correctly', () => {\n+    const result = extractCraigslistData();\n+    \n+    expect(result).toEqual({\n+      title: '2018 Trek Bike',\n+      price: '$500',\n+      postingTime: '2023-06-15',\n+      location: '123 Main St, City',\n+      description: 'Great condition Trek bike for sale.',\n+      images: [\n+        'https://images.craigslist.org/00101_abc123_600x450.jpg',\n+        'https://images.craigslist.org/00202_def456_600x450.jpg'\n+      ],\n+      attributes: {\n+        'make / manufacturer': 'Trek',\n+        'model name / number': 'FX',\n+        'bicycle type': 'hybrid'\n+      },\n+      postId: '12345',\n+      url: 'https://craigslist.org/d/bicycles/12345.html',\n+      extractedAt: expect.any(String)\n+    });\n+  });\n+\n+  test('handles missing elements gracefully', () => {\n+    // Remove some elements\n+    document.querySelector('#titletextonly').remove();\n+    document.querySelector('.price').remove();\n+    \n+    // Should throw error when title is missing\n+    expect(() => extractCraigslistData()).toThrow('Could not find post title');\n+  });\n+});\n\\ No newline at end of file\n"
                }
            ],
            "date": 1740771931236,
            "name": "Commit-0",
            "content": "import { extractCraigslistData } from '../web_extension/chrome/content.js';\n\ndescribe('Content Script', () => {\n  beforeEach(() => {\n    // Mock DOM elements for testing\n    document.body.innerHTML = `\n      <div id=\"titletextonly\">2018 Trek Bike</div>\n      <span class=\"price\">$500</span>\n      <time class=\"date timeago\">2023-06-15</time>\n      <div class=\"mapaddress\">123 Main St, City</div>\n      <section id=\"postingbody\">Great condition Trek bike for sale.</section>\n      <div id=\"thumbs\">\n        <a class=\"thumb\" href=\"#\"><img src=\"https://images.craigslist.org/00101_abc123_50x50c.jpg\"></a>\n        <a class=\"thumb\" href=\"#\"><img src=\"https://images.craigslist.org/00202_def456_50x50c.jpg\"></a>\n      </div>\n      <div class=\"attrgroup\">\n        <span>make / manufacturer: Trek</span>\n        <span>model name / number: FX</span>\n        <span>bicycle type: hybrid</span>\n      </div>\n    `;\n    \n    // Mock window.location for URL-based functionality\n    Object.defineProperty(window, 'location', {\n      value: { \n        pathname: '/bicycle/12345.html',\n        href: 'https://chicago.craigslist.org/bicycle/12345.html'\n      },\n      writable: true\n    });\n  });\n\n  test('extractCraigslistData extracts correct information', () => {\n    const data = extractCraigslistData();\n    \n    expect(data.title).toBe('2018 Trek Bike');\n    expect(data.price).toBe('$500');\n    expect(data.location).toBe('123 Main St, City');\n    expect(data.attributes['make / manufacturer']).toBe('Trek');\n    expect(data.images.length).toBe(2);\n    expect(data.postId).toBe('12345');\n  });\n});"
        }
    ]
}